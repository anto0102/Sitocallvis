<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StreamVerse - Il Tuo Mondo di Intrattenimento</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body class="bg-primary-bg text-text-color font-poppins">
  <header class="navbar fixed top-0 left-0 w-full z-50 py-4 px-8 flex justify-between items-center transition-colors duration-300">
    <div class="logo text-accent-color text-3xl font-bold">StreamVerse <3</div>
    <nav class="hidden md:block">
      <ul class="flex gap-8">
        <li><a href="#" class="nav-link active">Home</a></li>
        <li><a href="#" class="nav-link">Film</a></li>
        <li><a href="#" class="nav-link">Serie TV</a></li>
        <li><a href="profilo.html" class="nav-link">La mia lista</a></li>
      </ul>
    </nav>
    <div class="user-actions flex items-center gap-4">
      <form id="search-form" class="relative">
        <input type="text" id="search-input" placeholder="Cerca..." class="search-input bg-secondary-bg text-text-color border border-border-color rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-accent-color transition-all duration-300">
        <button type="submit" class="absolute right-3 top-1/2 -translate-y-1/2 text-text-color hover:text-accent-color transition-colors duration-200">üîç</button>
      </form>
      <div id="auth-area" class="flex items-center gap-3">
        <button id="login-btn" class="btn-primary" onclick="window.location.href='login.html'">Accedi</button>
        <button id="logout-btn" class="btn-secondary hidden">Logout</button>
        <a href="profilo.html" class="hidden" id="profile-link" title="Il mio profilo">
          <img id="profile-pic" src="default-profile.png" alt="Profilo" class="w-10 h-10 rounded-full border border-white" />
        </a>
      </div>
    </div>
  </header>

  <main id="main-content">
    <!-- Hero + sezioni (rimangono invariati) -->
    <!-- ... -->
  </main>

  <footer class="text-center py-8 px-4 bg-secondary-bg text-text-color mt-12">
    <p>&copy; 2025 StreamVerse. Tutti i diritti riservati. made by anxy col <3</p>
  </footer>

  <!-- Clerk + gestione auth con immagine profilo da localStorage -->
  <script>
    Clerk.configure({ publishableKey: "pk_test_b23saWdpbmctaWVyWxhLTc1LmNsZXJrLmFjY291bnRzLmRldiQ" });

    window.Clerk.load().then(async () => {
      const user = await Clerk.user;
      const loginBtn = document.getElementById("login-btn");
      const logoutBtn = document.getElementById("logout-btn");
      const profileLink = document.getElementById("profile-link");
      const profilePic = document.getElementById("profile-pic");

      if (user) {
        loginBtn.classList.add("hidden");
        logoutBtn.classList.remove("hidden");
        profileLink.classList.remove("hidden");

        const savedImage = localStorage.getItem("profileImage");
        const imageUrl = savedImage || "default-profile.png"; // fallback se non √® stata salvata
        profilePic.src = imageUrl;
      } else {
        loginBtn.classList.remove("hidden");
        logoutBtn.classList.add("hidden");
        profileLink.classList.add("hidden");
      }

      logoutBtn.addEventListener("click", async () => {
        await Clerk.signOut();
        window.location.reload();
      });
    });
  </script>

  <script src="index.js"></script>
</body>
</html>
